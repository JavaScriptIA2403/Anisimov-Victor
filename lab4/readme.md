# –õ–∞–±–∞—Ä–∞—Ç–æ—Ä–Ω–∞—è ‚Ññ4 `Anisimov Victor IA2403`

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞](#–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç–∞)
- [–û–ø–∏—Å–∞–Ω–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π-—Ä–∞–±–æ—Ç—ã)
- [–°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–∏](#—Å–ø–∏—Å–æ–∫-—Ñ—É–Ω–∫—Ü–∏–∏) 
- [–í—ã–∑–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–≤—ã–∑–æ–≤-–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#–æ—Ç–≤–µ—Ç—ã-–Ω–∞-–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
- [–°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤](#—Å–ø–∏—Å–æ–∫-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
- –û—Ç–∫—Ä–æ–π—Ç–µ VS Code, —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º **"Live Server"**.
- –°–ø—Ä–∞–≤–∞ —Å–Ω–∏–∑—É –µ—Å—Ç—å –ø–æ–ª—É **"Go Life"** –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é html —Ñ–∞–π–ª–∞ -> –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä.

## –û–ø–∏—Å–∞–Ω–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã
–û–∑–Ω–∞–∫–æ–º–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –æ—Å–Ω–æ–≤–∞–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è JS —Å DOM-–¥–µ—Ä–µ–≤–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É—á–µ—Ç–∞ –ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤.

## –°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–∏
–í—Å–µ–≥–æ –µ—Å—Ç—å 4 —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª–∞:
- index.js
- ui.js
- transactions.js
- utils.js

**<big>index.js</big>**<br>
–†–µ–∞–ª–∏–∑—É–µ—Ç –≥–ª–∞–≤–Ω—É–π —Å–≤—è–∑—å —Å —Ñ–æ—Ä–º–æ–π

–∫–æ–¥:
```js
import {GetDataForm} from './ui.js';
import {form} from './ui.js';
form.addEventListener('submit', GetDataForm);
```

**<big>ui.js</big>**<br>
–†–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏—è(–æ—Å—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ html):
```js
export function GetDataForm(event){
    event.preventDefault(); // –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
    const formData = new FormData(form); //–º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä—É—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ –∏–º—è
    if(0>Number(formData.get("sum")) || Number(formData.get("sum"))>10000000 ){
        const errMsg = document.createElement("div");
        errMsg.innerHTML = "<p style =\"background-color: brown; color: white;\">incorect amount: must be positive and less then 10,000,000</p>";
        form.appendChild(errMsg);
        setTimeout(()=>errMsg.remove(), 5000);
    }
    else{
        addTransaction(formData);
    }
}
```

- –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.<br>
[–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è **generateId**](#–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç–∞)
```js
export function addTransaction(data) {
    const now = new Date();
    const formattedDate = now.toLocaleString('ru-RU');
    const newId = generateId(formattedDate); 
    const transaction = {
        id: newId,
        date: formattedDate,
        amount: Number(data.get("sum")),
        type: data.get("type"),
        info: data.get("info")
    };

    transactions.push(transaction); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º

    renderTransaction(transaction); // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º
    document.getElementById("add").reset();
    updateTotalSum();
}
```

- –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```js
function renderTransaction(tx) {
    const newRow = document.createElement("tr");
    newRow.dataset.id = tx.id; //—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≤–∏–¥–Ω–æ–º –º–µ—Å—Ç–µ id —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    newRow.addEventListener('click', handleRowClick);
    const cell1 = document.createElement("td");
    const cell2 = document.createElement("td");
    const cell3 = document.createElement("td");
    const cell4 = document.createElement("td");
    const sum = document.createElement("td");

    cell1.textContent = tx.date;
    cell2.textContent = tx.type;
    cell3.textContent = tx.info;
    sum.textContent = tx.amount;

    const btnDlt = document.createElement('button');
    btnDlt.textContent = "–£–¥–∞–ª–∏—Ç—å";
    btnDlt.onclick = () => {
        table.removeChild(newRow);
        // –£–¥–∞–ª–∏–º –∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞
        const index = transactions.indexOf(tx);
        if (index > -1) transactions.splice(index, 1);
        const bl = document.getElementById("row2_1");
        bl.innerHTML = '';
        updateTotalSum();
    };
    cell4.appendChild(btnDlt);

    newRow.appendChild(cell1);
    newRow.appendChild(cell2);
    newRow.appendChild(sum);
    newRow.appendChild(cell3);
    newRow.appendChild(cell4);

    if(tx.type === "debit")
        newRow.id="debit-g";
    else if(tx.type === "credit")
        newRow.id="credit-r";
    table.appendChild(newRow);
}
```

- –§—É–Ω–∫—Ü–∏—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∑–∞–ø–∏—Å—å —Ç–∞–±–ª–∏—Ü—ã
```js
function handleRowClick(event) {
    if (event.target.tagName.toLowerCase() === 'button') return; // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫–∏

    const row = event.currentTarget;
    const id = row.dataset.id;

    const transaction = transactions.find(t => t.id === id);
    changeInfo(transaction);
}
```

- –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—è –≤—ã–≤–æ–¥–∞ –∏—Ñ–Ω–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```js
function changeInfo(transaction){
    const bl = document.getElementById("row2_1");
    bl.innerHTML = '';
    const parag = document.createElement("p");
    parag.innerHTML = `
    –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:<br>
        id: ${transaction.id} <br>
        date: ${transaction.date} <br>
        amount: ${transaction.amount} <br>
        type: ${transaction.type} <br>
        info: ${transaction.info}
    `;
    bl.appendChild(parag);
}
```

- –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—á—ë—Ç–∞ –æ–±—â–µ–π —Å—É–º–º—ã, —É—á–∏—Ç—ã–≤–∞—è –ø—Ä–∏–±—ã–ª—å –∏ —É–±—ã–ª—å
```js
function updateTotalSum(){
    const sum = document.getElementById("total_sum").lastElementChild;

    let total_amount = 0;

    for (const tx of transactions) {
        const amount = Number(tx.amount);
        if (tx.type === "debit") {
            total_amount += amount;
        } else if (tx.type === "credit") {
            total_amount -= amount;
        }
    }

    sum.innerText = total_amount.toLocaleString("ru-RU", { minimumFractionDigits: 2 });
}
```

- –ö–æ–¥, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–¥–Ω–æ–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ —Å–∞–π—Ç–µ, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –≤ –æ–¥–Ω–æ–π –∏–∑ –ø—Ä–æ—à–ª—ã—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `mostTransactionTypes` –∏ –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–Ω–æ–ø–∫–µ
```js
function buttonMostTransactionTypes(){
    if(transactions.length==0){
    alert("transactions is empty");
    }
   
    const trns = mostTransactionTypes(transactions);
    alert(trns);
}
 document.getElementById("most_trns_type").addEventListener('click', buttonMostTransactionTypes)
```

- –ü–æ–¥–æ–±–Ω–∞—è —Å—Ö–µ–º–∞, —á—Ç–æ –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏  `calculateTotalDebitAmount`.

```js
function buttonTotalDebitAmount(){
    if(transactions.length==0){
    alert("transactions is empty");
    }
   
    const trns = calculateTotalDebitAmount(transactions);
    alert("Total debit amount:"+trns);
}
document.getElementById("total_debi_amount").addEventListener('click', buttonTotalDebitAmount)
```


**<big>utils.js</big>**<br>

- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ id –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ç–æ—á–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞ –æ—Ç 0 –¥–æ 1*10<sup>5</sup>.

```js
export function generateId(time) {
    time = time.replace(/[.,: ]/g, '');
    const rand = Math.floor(Math.random() * 1e5);
    return `${time}${rand}`;
}
```



## –í—ã–∑–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ –≤–≤–µ—Å—Ç–∏ –ø—Ä–∞–≤–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º—É:
![alt text](form.png)

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤–≤–µ–¥–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–æ –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –≤ —Ç–∞–±–ª–∏—Ü—É —Å–ø—Ä–∞–≤–∞:

![alt text](image.png)

–ú–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å –æ–±—â–∏–π —Å—á—ë—Ç, –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –∏ –ø–∞—Ä—É –∫–Ω–æ–ø–æ–∫. –ù–∞—á–Ω—ë–º —Å–æ —Å—Ç—Ä–æ–∫–∏ - –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –µ—ë –º–µ—Å—Ç–µ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –Ω–µ–ª—å–∑—è.
 
 ![alt text](image-1.png)

–ö–Ω–æ–ø–∫–∏:
1. –¢–∏–ø –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª-–≤–æ —Ç—Ä–Ω–∑
![alt text](image-2.png)
2. –ù–∞–∏–±–æ–ª—å—à–∞—è –¥–µ–±–∏—Ç–æ–≤–∞—è —Ç—Ä–Ω–∑
![alt text](image-3.png)
–í–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç 0, —Ç.–∫. –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–µ—Ç—É –æ–∑–∞–ø–∏—Å–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ç–∏–ø–∞ *debit*


## –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
üîπ 1. –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç—É –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ?<br>
–° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ DOM, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```js
document.getElementById('id')
document.querySelector('.class')
document.querySelectorAll('div')
```
üîπ 2. –ß—Ç–æ —Ç–∞–∫–æ–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π?<br>
–≠—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ—à–∞–µ—Ç—Å—è –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç, –∞ —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –µ–≥–æ –ø–æ—Ç–æ–º–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é event.target.

–ü—Ä–∏–º–µ—Ä:

```js
document.getElementById('list').addEventListener('click', function(event) {
  if (event.target.tagName === 'LI') {
    console.log('Clicked item:', event.target.textContent);
  }
});
```
–ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

üîπ 3. –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç–ª–µ–º–µ–Ω—Ç–∞ DOM?<br>
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞:

```js
element.textContent = '–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç';
element.innerHTML = '<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>';
```
üîπ 4. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ DOM?<br>
–°–æ–∑–¥–∞—ë—à—å —ç–ª–µ–º–µ–Ω—Ç, –∑–∞–¥–∞—ë—à—å –µ–º—É —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–µ—à—å:

```js
const newDiv = document.createElement('div');
newDiv.textContent = '–ü—Ä–∏–≤–µ—Ç!';
document.body.appendChild(newDiv);
```


## –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [GitHub(—É—Å–ª–æ–≤–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è)](https://github.com/MSU-Courses/javascript/blob/main/lab/lab_guidelines.md)
- [Moodle(—É—Å–ª–æ–≤–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π)](https://moodle.usm.md/mod/assign/view.php?id=300747)
- [Stack Overflow](https://stackoverflow.com/)
- [JavaScript.info](https://learn.javascript.ru/)